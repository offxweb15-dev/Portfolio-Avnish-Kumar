<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Avnish Kumar - Web Developer with skills in HTML, CSS, and JavaScript. Check out my projects and get in touch!" />
    <title>Avnish Kumar | Web Developer</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Preconnect to critical domains with dns-prefetch fallback -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJfecg.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="img/portfolio.webp" as="image">
    
    <!-- Critical CSS with font-display: swap -->
    <style>
    @font-face {
        font-family: 'Poppins';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: local('Poppins Regular'), local('Poppins-Regular'),
             url('https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJfecg.woff2') format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
    </style>
    
    <!-- Critical CSS (above-the-fold styles) -->
    <style>
      /* Critical: Font Face */
      @font-face {
        font-family: 'Poppins';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: local('Poppins Regular'), local('Poppins-Regular'),
             url('https://fonts.gstatic.com/s/poppins/v15/pxiEyp8kv8JHgFVrJJfecg.woff2') format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }
      
      /* Critical: Layout and Typography */
      html { scroll-behavior: smooth; }
      body { 
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
      }
      
      /* Critical: Hero Section */
      .hero { 
        min-height: 100vh;
        display: flex;
        align-items: center;
        position: relative;
        overflow: hidden;
        opacity: 1; /* Make hero visible by default */
        transition: opacity 0.3s ease;
        padding: 100px 0 80px;
        margin-top: 0;
        background: linear-gradient(135deg, var(--darker-bg) 0%, var(--dark-bg) 100%);
      }
      
      /* Critical: Navigation */
      .navbar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
        transition: all 0.3s ease;
      }
      
      /* Critical: Buttons */
      .btn {
        display: inline-block;
        padding: 12px 30px;
        border-radius: 50px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        text-align: center;
      }
    </style>
    
    <!-- Preload critical CSS -->
    <link rel="preload" href="css/style.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="css/style.min.css"></noscript>
    
    <!-- Load non-critical CSS with low priority -->
    <link rel="preload" href="css/anime-theme.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="css/projects.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="css/blog.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- Load Google Fonts with display=swap and preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"></noscript>
    
    <!-- Load non-critical CSS with requestIdleCallback -->
    <script>
    if ('requestIdleCallback' in window) {
        requestIdleCallback(function() {
            const styles = ['css/anime-theme.css', 'css/projects.css', 'css/blog.css'];
            styles.forEach(href => {
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = href;
                document.head.appendChild(link);
            });
        }, { timeout: 2000 });
    }
    </script>
    
    <!-- Load Font Awesome from CDN with fallback -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" 
          crossorigin="anonymous" 
          referrerpolicy="no-referrer" 
          onerror="this.onerror=null;this.href='https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css'">
    
    <!-- Image optimization settings -->
    <script>
    // Enable lazy loading for images and iframes
    document.addEventListener('DOMContentLoaded', function() {
        // Lazy load images
        const lazyImages = [].slice.call(document.querySelectorAll('img[loading="lazy"]'));
        
        if ('IntersectionObserver' in window) {
            const lazyImageObserver = new IntersectionObserver(function(entries, observer) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) {
                        const lazyImage = entry.target;
                        lazyImage.src = lazyImage.dataset.src || lazyImage.src;
                        lazyImage.classList.add('loaded');
                        lazyImageObserver.unobserve(lazyImage);
                    }
                });
            });

            lazyImages.forEach(function(lazyImage) {
                lazyImageObserver.observe(lazyImage);
            });
        }
    });
    </script>
    
    <!-- Preload critical images -->
    <link rel="preload" as="image" href="img/portfolio.webp">
    
    <!-- Font Awesome with local fallback -->
    <link rel="preconnect" href="https://kit.fontawesome.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" 
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" 
          crossorigin="anonymous" 
          referrerpolicy="no-referrer" 
          onerror="this.onerror=null;this.href='css/fontawesome/css/all.min.css'" />
    <link rel="stylesheet" href="css/projects.css" />
    <link rel="stylesheet" href="css/blog.css" />
    <noscript>
      <link rel="stylesheet" href="css/fontawesome/css/all.min.css">
      <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    </noscript>
    
    <!-- Inline critical CSS -->
    <style>
        /* Critical CSS for above-the-fold content */
        .anime-font { font-family: 'Anime Ace', 'Press Start 2P', cursive; }
        
        /* Preloader styles */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0f0f1a;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }
        .preloader.fade-out { opacity: 0; }
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--anime-primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    
    <!-- Fallback for non-JavaScript -->
    <noscript>
        <link rel="stylesheet" href="css/style.min.css">
        <link rel="stylesheet" href="css/anime-theme.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
        <link rel="stylesheet" href="css/fontawesome/css/all.min.css">
    </noscript>
</head>
<body class="anime-theme">
    <!-- Particles Background -->
    <div class="particles" id="particles-js"></div>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <a href="#home">WEB15</a>
            </div>
            <div class="nav-links">
                <a href="#home" class="nav-link">Home</a>
                <a href="#about" class="nav-link">About</a>
                <a href="#skills" class="nav-link">Skills</a>
                <a href="#projects" class="nav-link">Projects</a>
                <a href="#blog" class="nav-link">Blog</a>
                <a href="#contact" class="nav-link">Contact</a>
                <a href="#contact" class="btn btn-primary">Hire Me</a>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Hero Section with Anime Theme -->
    <section id="home" class="hero anime-theme">
        <div class="speed-lines" id="speedLines"></div>
        <!-- Add your character image here -->
        <div class="container">
            <div class="hero-content">
                <h1 class="glitch anime-text" data-text="Konnichiwa! I'm Avnish Kumar">
                    <div class="greeting-container">
                        <div class="greeting">Konnichiwa!</div>
                        <div class="greeting">I'm Avnish Kumar</div>
                    </div>
                </h1>
                <p class="subtitle">Frontend Developer & Anime Enthusiast<br>Creating digital experiences that tell a story</p>
                <div class="speech-bubble">
                    こんにちは！Welcome to my portfolio!
                </div>
                <div class="cta-buttons">
                    <a href="#projects" class="btn btn-primary">View Projects</a>
                    <a href="#contact" class="btn btn-outline">Contact Me</a>
                </div>
                </div>
            </div>
        </div>
        <div class="floating-elements">
            <div class="cube"></div>
            <div class="circle"></div>
            <div class="triangle"></div>
        </div>
    </section>

    <!-- About Section with Manga Style -->
    <section id="about" class="about">
        <!-- Add your about section image here -->
        <div class="container">
            <h2 class="section-title anime-style">About <span style="color: var(--anime-primary);">私</span></h2>
            <div class="about-content">
                <div class="about-img">
                    <div class="image-container">
                        <picture>
                            <!-- WebP format with responsive sources -->
                            <source 
                                type="image/webp" 
                                srcset="img/portfolio.webp 1x"
                                sizes="(max-width: 768px) 90vw, (max-width: 1200px) 45vw, 35vw"
                                loading="lazy"
                                decoding="async"
                                width="400"
                                height="700"
                            >
                            <!-- Responsive image with modern loading -->
                            <img 
                                src="img/portfolio.webp"
                                loading="lazy"
                                alt="Portfolio Image"
                                width="400"
                                height="700"
                                height="700"
                                alt="Avnish Kumar - Web Developer"
                                class="portfolio-image lazyload"
                                decoding="async"
                                onload="this.parentElement.parentElement.classList.add('loaded')"
                                onerror="this.onerror=null; this.src='img/fallback.jpg'"
                            >
                        </picture>
                        <div class="image-border"></div>
                        <div class="image-glow"></div>
                    </div>
                </div>
                <div class="about-text">
                    <h3>Web Developer</h3>
                    <div class="about-cards">
                        <div class="about-card">
                            <h4>WHO AM I</h4>
                            <p>I'm Avnish, a web developer with a strong foundation in HTML, CSS, and JavaScript. I recently completed a certification and I'm excited to start building real-world projects.</p>
                        </div>
                        <div class="about-card">
                            <h4>WHAT I'VE LEARNED</h4>
                            <p>I've worked on front-end fundamentals, responsive design, and JavaScript basics. I'm also learning modern tools like Git, VS Code, and frameworks step by step.</p>
                        </div>
                        <div class="about-card">
                            <h4>WHAT I AM LOOKING FOR</h4>
                            <p>Right now, I'm focusing on creating practical projects to sharpen my skills. I'm open to internships, collaborations, and opportunities where I can contribute while learning from real-world challenges.</p>
                        </div>
                    </div>
                    <a href="Resume_AvnishKumar.pdf" class="btn btn-primary" download="AvnishKumar_Resume.pdf">Download CV</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="skills">
        <div class="container">
            <h2 class="section-title anime-style">My <span style="color: var(--anime-primary);">スキル</span></h2>
            <div class="skills-container">
                <div class="skill-category">
                    <div class="skills-grid">
                        <!-- More skill cards will be added via JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="projects">
        <div class="container">
            <h2 class="section-title anime-style">My <span style="color: var(--anime-primary);">プロジェクト</span></h2>
            <div class="projects-filter">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="web">Web</button>
                <button class="filter-btn" data-filter="app">App</button>
                <button class="filter-btn" data-filter="design">Design</button>
            </div>
            <div class="projects-grid" id="projects-container">
                <!-- Project items will be added via JavaScript -->
            </div>
            <div class="view-all-container">
                <a href="#" class="btn btn-primary view-all-btn">View All Projects</a>
            </div>
        </div>
    </section>

    <!-- Blog Section -->
    <section id="blog" class="blog">
        <div class="container">
            <h2 class="section-title anime-style">Latest <span style="color: var(--anime-primary);">ブログ</span> Posts</h2>
            <div class="coming-soon">
                <i class="fas fa-blog"></i>
                <h3>Coming Soon</h3>
                <p>Exciting content is on its way! Check back later for updates.</p>
                </div>
            <div class="text-center">
                <a href="#" class="btn btn-primary">View All Posts</a>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <h2 class="section-title anime-style">Get In <span style="color: var(--anime-primary);">連絡</span></h2>
            <div class="contact-content">
                <div class="contact-info">
                    <div class="contact-item">
                        <div class="icon"><i class="fas fa-envelope"></i></div>
                        <div class="text">
                            <h3>Email</h3>
                            <a href="mailto:avanishmourya6@gmail.com">avanishmourya6@gmail.com</a>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="icon"><i class="fas fa-phone"></i></div>
                        <div class="text">
                            <h3>Phone</h3>
                            <a href="tel:+917464992126">+91 74649 92126</a>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="icon"><i class="fas fa-map-marker-alt"></i></div>
                        <div class="text">
                            <h3>Location</h3>
                            <p>Muzaffarnagar, Uttar Pradesh, India</p>
                        </div>
                    </div>
                    <div class="social-links" role="list">
                        <a href="https://github.com/avanishmourya6-web" class="social-icon" aria-label="GitHub profile" rel="noopener noreferrer">
                            <i class="fab fa-github" aria-hidden="true"></i>
                            <span class="sr-only">GitHub</span>
                        </a>
                        <a href="https://www.linkedin.com/in/avnish-kumar-92a934390/" class="social-icon" aria-label="LinkedIn profile" rel="noopener noreferrer">
                            <i class="fab fa-linkedin" aria-hidden="true"></i>
                            <span class="sr-only">LinkedIn</span>
                        </a>
                        <a href="https://twitter.com/offx_avnish_" class="social-icon" aria-label="Twitter profile" rel="noopener noreferrer">
                            <i class="fab fa-twitter" aria-hidden="true"></i>
                            <span class="sr-only">Twitter</span>
                        </a>
                        <a href="https://www.instagram.com/offx._web15/" class="social-icon" aria-label="Instagram profile" rel="noopener noreferrer">
                            <i class="fab fa-instagram" aria-hidden="true"></i>
                            <span class="sr-only">Instagram</span>
                        </a>
                    </div>
                </div>
                <form class="contact-form" id="contactForm" method="POST">
                        <!-- Web3Forms Configuration -->
                        <input type="hidden" name="access_key" value="c84a6e9c-4205-4c0d-91c3-36ba5af39890">
                        <input type="hidden" name="subject" value="New Contact Form Submission">
                        <input type="checkbox" name="botcheck" class="hidden" style="display: none !important; visibility: hidden; position: absolute; left: -9999px;" tabindex="-1" aria-hidden="true">
                    <div class="form-group">
                        <label for="name" class="form-label">Your Name</label>
                        <input type="text" id="name" name="name" placeholder="Your Name" autocomplete="name" required
                            aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="email" class="form-label">Your Email</label>
                        <input type="email" id="email" name="email" placeholder="Your Email" autocomplete="email" required
                            aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="subject" class="form-label">Subject</label>
                        <input type="text" id="subject" name="subject" placeholder="Subject" required
                            aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="message" class="form-label">Your Message</label>
                        <textarea id="message" name="message" placeholder="Your Message" required
                            aria-required="true"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <span class="btn-text">Send Message</span>
                        <span class="btn-icon" aria-hidden="true">
                            <i class="fas fa-paper-plane"></i>
                        </span>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <a href="#home">WEB15</a>
                </div>
                <p>© 2025 Your Name. All Rights Reserved</p>
                <div class="footer-links">
                    <a href="#home">Home</a>
                    <a href="#about">About</a>
                    <a href="#skills">Skills</a>
                    <a href="#projects">Projects</a>
                    <a href="#blog">Blog</a>
                    <a href="#contact">Contact</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <a href="#" class="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </a>

    <!-- Performance Optimized Scripts -->
    <script>
    // Optimized script loader with better error handling and resource hints
    function loadScript(src, { async = true, defer = false, module = false } = {}) {
        return new Promise((resolve, reject) => {
            if (document.querySelector(`script[src="${src}"]`)) {
                console.log(`Script already loaded: ${src}`);
                return resolve();
            }

            const script = document.createElement('script');
            script.src = src;
            script.async = async;
            script.defer = defer;
            if (module) script.type = 'module';
            
            // Add preconnect for external resources
            if (src.startsWith('http')) {
                const url = new URL(src);
                const preconnect = document.createElement('link');
                preconnect.rel = 'preconnect';
                preconnect.href = url.origin;
                document.head.appendChild(preconnect);
            }

            script.onload = () => {
                console.log(`Loaded: ${src}`);
                resolve();
            };
            
            script.onerror = (err) => {
                console.error(`Error loading ${src}:`, err);
                reject(err);
            };
            
            // Use requestIdleCallback to load non-critical scripts during idle time
            const load = () => document.body.appendChild(script);
            if ('requestIdleCallback' in window) {
                requestIdleCallback(load, { timeout: 2000 });
            } else {
                setTimeout(load, 0);
            }
        });
    }

    // Load critical scripts immediately
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM fully loaded');
        
        // Load data.js and main.js as critical scripts
        Promise.all([
            loadScript('js/data.js', { defer: true }),
            loadScript('js/main.js', { defer: true })
        ]).then(() => {
            console.log('Critical scripts loaded');
            
            // Load non-critical scripts with lower priority
            if ('requestIdleCallback' in window) {
                requestIdleCallback(() => {
                    loadScript('js/anime-effects.js')
                        .then(() => console.log('anime-effects.js loaded'))
                        .catch(err => console.error('Error loading anime-effects.js:', err));
                }, { timeout: 2000 });
            }
            
            // Lazy load particles.js when in viewport
            const particlesSection = document.querySelector('.particles');
            if (particlesSection) {
                const observer = new IntersectionObserver((entries, observer) => {
                    if (entries[0].isIntersecting) {
                        loadScript('js/particles.min.js')
                            .then(() => {
                                if (typeof particlesJS === 'function') {
                                    particlesJS('particles-js', {
                                        particles: {
                                            number: { 
                                                value: 80,  // Reduced number of particles for better performance
                                                density: {
                                                    enable: true,
                                                    value_area: 1000  // Controls the density
                                                }
                                            },
                                            size: {
                                                value: 2,  // Smaller particles
                                                random: true,
                                                anim: {
                                                    enable: true,
                                                    speed: 2,
                                                    size_min: 0.5,
                                                    size_max: 3,
                                                sync: false
                                            }
                                        },
                                        line_linked: {
                                            enable: true,
                                            distance: 150,  // Slightly longer connections
                                            color: '#ffffff',
                                            opacity: 0.3,  // Slightly more visible connections
                                            width: 0.8     // Slightly thicker connection lines
                                        },
                                        move: {
                                            enable: true,
                                            speed: 1.5,     // Slightly faster movement
                                            direction: 'none',
                                            random: true,   // Add some randomness
                                            straight: false,
                                            out_mode: 'bounce', // Bounce at edges
                                            bounce: true,
                                            attract: {
                                                enable: false,
                                                rotateX: 600,
                                                rotateY: 1200
                                            }
                                        }
                                    },
                                    interactivity: {
                                        detect_on: 'canvas',
                                        events: {
                                            onhover: {
                                                enable: true,
                                                mode: 'grab'
                                            },
                                            onclick: {
                                                enable: true,
                                                mode: 'push'
                                            },
                                            resize: true
                                        }
                                    },
                                    retina_detect: true
                                });
                            }
                        });
                        observer.disconnect();
                    }
                }, { threshold: 0.1 });
                observer.observe(particlesSection);
            }
        }, 100);
    });
    </script>
    
    <!-- Performance Monitoring -->
    <script>
    (function() {
        'use strict';

        // Function to safely get timing metrics
        function getTimingMetrics() {
            if (!('performance' in window) || !performance.timing) {
                return null;
            }

            const timing = performance.timing;
            const now = Date.now();
            
            // Ensure we only return positive values
            const safeTiming = (end, start) => {
                const value = end - start;
                return value > 0 ? value : 0;
            };

            return {
                dns: safeTiming(timing.domainLookupEnd, timing.domainLookupStart),
                tcp: safeTiming(timing.connectEnd, timing.connectStart),
                ttfb: safeTiming(timing.responseStart, timing.requestStart),
                pageLoad: safeTiming(timing.loadEventStart, timing.navigationStart),
                domReady: safeTiming(timing.domComplete, timing.domLoading),
                contentLoad: safeTiming(timing.domContentLoadedEventStart, timing.domLoading),
                timeToInteractive: timing.domInteractive - timing.navigationStart,
                timestamp: now
            };
        }

        // Log performance metrics
        function logPerformanceMetrics() {
            const metrics = getTimingMetrics();
            if (!metrics) return;
            
            console.log('Performance Metrics:', metrics);
            
            // Send to analytics if available
            if (window.gtag) {
                gtag('event', 'timing_complete', {
                    'name': 'page_load',
                    'value': metrics.pageLoad,
                    'event_category': 'Load Performance',
                    'non_interaction': true
                });
            }
        }
        
        // Web Vitals implementation with fallback
        function initWebVitals() {
            // Check if web-vitals is available
            if (typeof window.webVitals === 'object') {
                try {
                    const { getCLS, getFID, getLCP, getFCP, getTTFB } = window.webVitals;
                    
                    // Only track these in production
                    const isProd = window.location.hostname !== 'localhost' && 
                                 window.location.protocol === 'https:';
                    
                    const reportHandler = (metric) => {
                        console.log(metric);
                        if (isProd && window.gtag) {
                            gtag('event', metric.name, {
                                'event_category': 'Web Vitals',
                                'value': Math.round(metric.value),
                                'event_label': metric.id,
                                'non_interaction': true
                            });
                        }
                    };
                    
                    // Register web vitals
                    getCLS(reportHandler, { reportAllChanges: true });
                    getFID(reportHandler);
                    getLCP(reportHandler);
                    getFCP(reportHandler);
                    getTTFB(reportHandler);
                    
                    return;
                } catch (e) {
                    console.warn('Error initializing web-vitals:', e);
                }
            }
            
            // Fallback to basic metrics if web-vitals fails
            logPerformanceMetrics();
        }
        
        // Optimize images with IntersectionObserver
        function optimizeImages() {
            if (typeof document === 'undefined' || !('IntersectionObserver' in window)) {
                return;
            }
            
            const lazyImages = [].slice.call(document.querySelectorAll('img[loading="lazy"]'));
            if (lazyImages.length === 0) return;
            
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        if (img.dataset.src) {
                            img.src = img.dataset.src;
                            delete img.dataset.src;
                        }
                        if (img.dataset.srcset) {
                            img.srcset = img.dataset.srcset;
                            delete img.dataset.srcset;
                        }
                        img.classList.add('loaded');
                        observer.unobserve(img);
                    }
                });
            }, {
                rootMargin: '200px 0px',
                threshold: 0.01
            });

            lazyImages.forEach(img => imageObserver.observe(img));
        }
        
        // Initialize everything when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Load web-vitals from a reliable CDN
            const loadWebVitals = () => {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/web-vitals@2.1.4/dist/web-vitals.umd.min.js';
                script.integrity = 'sha512-ERnOC/RU18OCMtOaSfDn2F/ZXwrqd/WtHXrFOuvtZioVrDBVlR3RpxAdHKUj9qfo2WVPFMbivQBW7RG7MP2Icg==';
                script.crossOrigin = 'anonymous';
                script.onload = initWebVitals;
                script.onerror = () => {
                    console.log('Web Vitals failed to load, using fallback metrics');
                    logPerformanceMetrics();
                };
                document.head.appendChild(script);
            };
            
            // Initialize with a small delay to avoid blocking rendering
            if (document.readyState === 'complete') {
                setTimeout(loadWebVitals, 0);
            } else {
                window.addEventListener('load', () => setTimeout(loadWebVitals, 0));
            }
            
            // Optimize images
            optimizeImages();
            
            // Log initial metrics after a short delay to ensure all resources are loaded
            setTimeout(logPerformanceMetrics, 1000);
        });
    })();
    </script>
    
    <!-- Fallback for browsers that don't support modules -->
    <script nomodule>
    // Basic performance logging for non-module browsers
    if ('performance' in window) {
        window.addEventListener('load', function() {
            const timing = performance.timing;
            console.log('Page loaded in', timing.loadEventStart - timing.navigationStart, 'ms');
        });
    }
    </script>
    
    <!-- Service Worker Registration -->
    <script>
    (function() {
        'use strict';

        // Function to show update notification
        function showUpdateNotification() {
            try {
                const toast = document.createElement('div');
                Object.assign(toast.style, {
                    position: 'fixed',
                    bottom: '20px',
                    right: '20px',
                    padding: '15px 25px',
                    background: '#333',
                    color: '#fff',
                    borderRadius: '5px',
                    zIndex: '10000',
                    cursor: 'pointer',
                    boxShadow: '0 4px 6px rgba(0,0,0,0.1)'
                });
                
                toast.textContent = 'New version available! Click to update.';
                toast.onclick = () => window.location.reload();
                document.body.appendChild(toast);
                
                // Auto-hide after 10 seconds
                setTimeout(() => {
                    toast.style.opacity = '0';
                    toast.style.transition = 'opacity 0.5s';
                    setTimeout(() => {
                        if (toast && toast.parentNode) {
                            toast.remove();
                        }
                    }, 500);
                }, 10000);
            } catch (error) {
                console.error('Error showing update notification:', error);
            }
        }

        // Function to register service worker
        function registerServiceWorker() {
            // Clear existing service workers
            return navigator.serviceWorker.getRegistrations()
                .then(registrations => {
                    const unregisterPromises = registrations.map(reg => 
                        reg.unregister().catch(err => 
                            console.warn('Error unregistering service worker:', err)
                        )
                    );
                    return Promise.all(unregisterPromises);
                })
                .then(() => {
                    // Register new service worker
                    return navigator.serviceWorker.register('sw.js', { 
                        scope: '/',
                        updateViaCache: 'none' 
                    });
                })
                .then(registration => {
                    console.log('ServiceWorker registered with scope:', registration.scope);
                    
                    // Check for updates
                    if (registration.update) {
                        registration.update().catch(console.warn);
                    }
                    
                    // Listen for updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        if (newWorker) {
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    console.log('New content available; please refresh.');
                                    showUpdateNotification();
                                }
                            });
                        }
                    });
                    
                    // Handle controller changes
                    navigator.serviceWorker.addEventListener('controllerchange', () => {
                        console.log('Controller changed, reloading...');
                        window.location.reload();
                    });
                    
                    return registration;
                })
                .catch(err => {
                    console.error('ServiceWorker registration failed:', err);
                    throw err;
                });
        }

        // Register service worker after page load to not block rendering
        document.addEventListener('DOMContentLoaded', function() {
            // Only register service worker in production
            if ('serviceWorker' in navigator) {
                const isProduction = window.location.hostname !== 'localhost' && window.location.protocol === 'https:';
                
                if (isProduction) {
                    // Register with idle callback
                    if (window.requestIdleCallback) {
                        requestIdleCallback(registerServiceWorker, { timeout: 2000 });
                    } else {
                        setTimeout(registerServiceWorker, 2000);
                    }
                } else {
                    // In development, unregister any existing service workers
                    navigator.serviceWorker.getRegistrations()
                        .then(registrations => {
                            if (registrations.length > 0) {
                                console.log('Development: Unregistering service workers...');
                                return Promise.all(registrations.map(reg => reg.unregister()));
                            }
                            return null;
                        })
                        .catch(console.warn);
                }
            }
        });
    })();
    </script>
    <!-- Inline critical data and scripts -->
    <script>
        // Create a single object to hold all data
        window.portfolioData = {
            skills: {
                frontend: [
                    { name: 'HTML5', icon: 'fab fa-html5', level: 90 },
                    { name: 'CSS3', icon: 'fab fa-css3-alt', level: 85 },
                    { name: 'JavaScript', icon: 'fab fa-js', level: 80 },
                    { name: 'React', icon: 'fab fa-react', level: 75 },
                    { name: 'Bootstrap', icon: 'fab fa-bootstrap', level: 85 },
                    { name: 'Sass', icon: 'fab fa-sass', level: 75 }
                ],
                backend: [
                    { name: 'Node.js', icon: 'fab fa-node-js', level: 75 },
                    { name: 'Express', icon: 'fas fa-server', level: 70 },
                    { name: 'MongoDB', icon: 'fas fa-database', level: 70 },
                    { name: 'RESTful APIs', icon: 'fas fa-code', level: 75 }
                ],
                tools: [
                    { name: 'Git', icon: 'fab fa-git-alt', level: 80 },
                    { name: 'GitHub', icon: 'fab fa-github', level: 80 },
                    { name: 'VS Code', icon: 'fas fa-code', level: 90 },
                    { name: 'Responsive Design', icon: 'fas fa-mobile-alt', level: 85 }
                ]
            },
            projects: [
                {
                    title: 'Portfolio Website',
                    description: 'A responsive portfolio website built with HTML, CSS, and JavaScript.',
                    image: 'img/portfolio.webp',
                    category: 'web',
                    demo: '#',
                    github: '#'
                },
                {
                    title: 'Weather App',
                    description: 'A weather application that shows current weather and forecast using a weather API.',
                    image: 'https://via.placeholder.com/600x400/1a1a2e/ffffff?text=Weather+App',
                    category: 'web',
                    demo: '#',
                    github: '#'
                }
            ]
        };
    </script>
</body>
</html>
